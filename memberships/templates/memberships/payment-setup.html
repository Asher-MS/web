<script src="https://js.stripe.com/v3/"></script>

<h1>Setup your Geek.Zone donation</h1>

{% if donation %}
<h2>You are donating £{{donation}}</h2>
{% else %}
<h2>You are not donating any extra to Geek.Zone</h2>
{% endif %}
<p>Your yearly cost will be £{{total}}</p>

<button id="checkout-button">Setup your Direct Debit</button>

<script>
    const stripe = Stripe('{{stripe_public_key}}');

    const checkoutButton = document.getElementById('checkout-button');
    checkoutButton.addEventListener('click', () => {
        const price = document.getElementById('donation');

        stripe.redirectToCheckout({
            sessionId: '{{session.id}}'
        }).then(result => {
            console.log('error with stripe redirect', {error})
        });
    });
</script>